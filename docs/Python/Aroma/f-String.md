---
layout: default
title: f-string
parent: Python Aroma
grand_parent: Python
---

# f-string

## ä¸ºä»€ä¹ˆéœ€è¦f-stringï¼Ÿ

å¦‚æœæˆ‘æƒ³è¦åœ¨å­—ç¬¦ä¸²ä¸­æ’å…¥å˜é‡ï¼Œæˆ‘éœ€è¦ä½¿ç”¨`+`è¿ç®—ç¬¦æ¥è¿æ¥å­—ç¬¦ä¸²å’Œå˜é‡ï¼Œè¿™ä¼šä½¿ä»£ç å˜å¾—å†—é•¿ä¸”éš¾ä»¥é˜…è¯»ã€‚

```python
name = "Tink"
age = 18
print("My name is " + name + " and I am " + str(age) + " years old.")
```

f-stringæ˜¯Python 3.6å¼•å…¥çš„ä¸€ç§æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„æ–¹å¼ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨å­—ç¬¦ä¸²ä¸­ç›´æ¥åµŒå…¥å˜é‡ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å­—ç¬¦ä¸²ä¸­ç›´æ¥è¿›è¡Œè¿ç®—ã€‚

```python
name = "Tink"
age = 18
print(f"My name is {name} and I am {age} years old.")
```

è¾“å‡ºï¼š
```
My name is Tink and I am 18 years old.
```

f-stringçš„è¯­æ³•æ˜¯åœ¨å­—ç¬¦ä¸²å‰é¢åŠ ä¸Šå­—æ¯fï¼ˆformatçš„é¦–å­—æ¯ï¼‰ï¼Œç„¶ååœ¨å­—ç¬¦ä¸²ä¸­ç”¨èŠ±æ‹¬å·{}æ‹¬èµ·æ¥è¦åµŒå…¥çš„å˜é‡ã€‚Pythonä¼šè‡ªåŠ¨å°†èŠ±æ‹¬å·ä¸­çš„å˜é‡æ›¿æ¢ä¸ºå¯¹åº”çš„å€¼ã€‚

f-stringçš„ä¼˜ç‚¹æ˜¯ç®€æ´ã€æ˜“è¯»ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å­—ç¬¦ä¸²ä¸­ç›´æ¥è¿›è¡Œè¿ç®—ã€‚ä½†æ˜¯f-stringä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ï¼Œæ¯”å¦‚æ€§èƒ½è¾ƒå·®ï¼Œå¹¶ä¸”ä¸æ”¯æŒå¤šè¡Œå­—ç¬¦ä¸²ã€‚

## f-stringçš„å‡ ä¸ªä¾‹å­

### = è¾“å‡ºè¡¨è¾¾å¼
= èƒ½å¤Ÿæ˜¾ç¤ºç­‰å·å·¦è¾¹è¡¨è¾¾å¼çš„å­—é¢å†…å®¹å’Œå¯¹åº”çš„å€¼ã€‚

```python
name = "Tink"
age = 18
print(f"{name=}")
print(f"{age=}")
```
è¾“å‡ºï¼š
```
name='Tink'
age=18
```

```python
name = "Tink"
age = 18
print(f"{isinstance(age, int)=}")
```
è¾“å‡ºï¼š

```
isinstance(age, int)=True
```

### :æ ¼å¼åŒ–æ•°å­—

ä¿ç•™å°æ•°ä½æ•°
```python
num = 3.1415926
percent = 0.231234
print(f"{num:.2f}")
print(f"{percent:.2%}")
```

è¾“å‡ºï¼š
```
3.14
23.12%
```

åƒä½åˆ†éš”ç¬¦ï¼Œæ”¯æŒ_ å’Œ , ä¸¤ç§åˆ†éš”ç¬¦
```python
big = 12345678901234567890
print(f"{big:,}")
print(f"{big:_}")
```

è¾“å‡ºï¼š
```
1,234,567,890,123,456,789
12_345_678_901_234_567_890
```

ä¸¤è€…å¯ä»¥ä¸€èµ·ä½¿ç”¨
```python
big: float = 123456.789
print(f"{big:_.2f}")
```

è¾“å‡ºï¼š
```
123_456.79
```

### æ ¼å¼åŒ–æ—¥æœŸ

```python
from datetime import datetime

now:datetime = datetime.now()
print(f"{now:%x}")
print(f"{now:%c}")
print(f"{now:%Y-%m-%d %H:%M:%S}")
```

è¾“å‡ºï¼š

```
11/28/24
Thu Nov 28 01:03:07 2024
2024-11-28 01:03:07
```

### frå­—ç¬¦ä¸²

frå­—ç¬¦ä¸²å¯ä»¥ç”¨æ¥åˆ›å»ºåŒ…å«åŸå§‹å­—ç¬¦ä¸²çš„f-stringã€‚åœ¨frå­—ç¬¦ä¸²ä¸­ï¼Œæ‰€æœ‰çš„åæ–œæ éƒ½ä¼šè¢«ä¿ç•™ï¼Œä¸ä¼šè¢«è½¬ä¹‰ã€‚

```python
path = r"C:\Users\Tink\Documents\test.txt"
print(f"File path: {path}")
```

è¾“å‡ºï¼š

```
File path: C:\Users\Tink\Documents\test.txt
```

### å¡«å……å’Œå¯¹é½
f-stringæ”¯æŒå¡«å……å’Œå¯¹é½ï¼Œä½¿ç”¨`<`ã€`>`å’Œ`^`æ¥æŒ‡å®šå¯¹é½æ–¹å¼ï¼Œä½¿ç”¨`:`æ¥æŒ‡å®šå¡«å……å­—ç¬¦å’Œå®½åº¦ã€‚
å®½åº¦å¯ä»¥æ˜¯å˜é‡ï¼Œä¹Ÿå¯ä»¥æ˜¯å›ºå®šçš„æ•°å­—ã€‚å¡«å……å­—ç¬¦å¯ä»¥æ˜¯ä»»ä½•å­—ç¬¦ï¼Œé»˜è®¤æ˜¯ç©ºæ ¼ã€‚

```python
name = "Tink"
print(f"{name:ğŸ±<20}")
print(f"{name:ğŸ¶>20}")
print(f"{name:*^20}")
```

è¾“å‡ºï¼š
```
TinkğŸ±ğŸ±ğŸ±ğŸ±ğŸ±ğŸ±ğŸ±ğŸ±ğŸ±ğŸ±ğŸ±ğŸ±ğŸ±ğŸ±ğŸ±ğŸ±
ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶Tink
********Tink********
```

## f-stringçš„åŸç†

f-stringæ˜¯é€šè¿‡è°ƒç”¨å¯¹è±¡çš„`__format__`æ–¹æ³•æ¥å®ç°çš„ã€‚`__format__`æ–¹æ³•æ¥å—ä¸€ä¸ªæ ¼å¼åŒ–å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ ¼å¼åŒ–åçš„å­—ç¬¦ä¸²ã€‚
ä¾‹å¦‚ï¼Œå¯¹äº`f"{name:ğŸ±<20}"`ï¼ŒPythonä¼šè°ƒç”¨`name.__format__(":ğŸ±<20")`ï¼Œè¿”å›ä¸€ä¸ªæ ¼å¼åŒ–åçš„å­—ç¬¦ä¸²ã€‚
çŸ¥é“äº†åŸç†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é‡å†™å¯¹è±¡çš„`__format__`æ–¹æ³•æ¥è‡ªå®šä¹‰f-stringçš„æ ¼å¼åŒ–è¡Œä¸ºã€‚

```python
class MyString(str):
    def __format__(self, format_spec:str):
        match format_spec:
            case "å¤§å†™":
                return self.upper()
            case _:
                return super().__format__(format_spec)

name = MyString("tink")
print(f"{name:å¤§å†™}")
```

è¾“å‡ºï¼š
```
TINK
```

å‚è€ƒ[Every F-String Trick In Python Explained](https://www.youtube.com/watch?v=9saytqA0J9A)